<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主题切换测试</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar navbar-modern">
        <div class="container">
            <div class="navbar-brand">
                <i class="fas fa-cloud-download-alt logo-icon"></i>
                <span class="logo-text">智能资源下载站</span>
            </div>
            
            <button class="navbar-toggle" onclick="toggleNavMenu()" aria-label="切换菜单">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="navbar-menu" id="navbarMenu">
                <div class="navbar-search">
                    <input type="text" placeholder="搜索资源..." class="search-input" id="resourceSearch">
                    <button class="search-btn" onclick="searchResources()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <ul class="navbar-links">
                    <li><a href="#resources" class="nav-link"><i class="fas fa-database"></i> 资源库</a></li>
                    <li><a href="#browser" class="nav-link"><i class="fas fa-globe"></i> 在线浏览器</a></li>
                    <li><a href="#upload" class="nav-link"><i class="fas fa-upload"></i> 上传资源</a></li>
                </ul>
                
                <div class="navbar-actions" id="userActions">
                    <button class="btn btn-outline" onclick="openLoginModal()">
                        <i class="fas fa-sign-in-alt"></i> 登录
                    </button>
                    <button class="btn btn-primary" onclick="openRegisterModal()">
                        <i class="fas fa-user-plus"></i> 注册
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1>主题切换按钮测试</h1>
        <p>检查导航栏中是否存在主题切换按钮（月亮图标）</p>
        <div id="testResult"></div>
    </div>

    <!-- 引入JavaScript文件 -->
    <script src="js/modules/ThemeSystem.js"></script>
    <script>
        // 测试主题系统
        document.addEventListener('DOMContentLoaded', function() {
            const resultDiv = document.getElementById('testResult');
            
            // 初始化主题系统
            const themeSystem = window.themeSystem;
            if (themeSystem) {
                themeSystem.initialize();
                resultDiv.innerHTML = '<p style="color: green;">✅ ThemeSystem初始化成功</p>';
                
                // 检查主题切换按钮是否存在
                setTimeout(() => {
                    const themeToggle = document.getElementById('themeToggle');
                    if (themeToggle) {
                        resultDiv.innerHTML += '<p style="color: green;">✅ 主题切换按钮已创建</p>';
                        
                        // 检查事件监听器是否已添加
                        const clonedBtn = themeToggle.cloneNode(true);
                        if (clonedBtn.onclick || getEventListeners(clonedBtn).click) {
                            resultDiv.innerHTML += '<p style="color: green;">✅ 事件监听器已添加</p>';
                        } else {
                            resultDiv.innerHTML += '<p style="color: red;">❌ 事件监听器未添加</p>';
                        }
                    } else {
                        resultDiv.innerHTML += '<p style="color: red;">❌ 主题切换按钮未创建</p>';
                    }
                }, 1000);
            } else {
                resultDiv.innerHTML = '<p style="color: red;">❌ ThemeSystem未加载</p>';
            }
        });
    </script>
</body>
</html>